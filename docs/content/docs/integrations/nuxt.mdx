---
title: Nuxt Integration
description: Integrate Better Query with Nuxt.
---

Before you start, make sure you have a Better Query instance configured. If you haven't done that yet, check out the [installation](/docs/installation).

### Create API Route

We need to mount the handler to an API route. Create a file inside `/server/api/query` called `[...all].ts` and add the following code:

```ts title="server/api/query/[...all].ts"
import { query } from "~/lib/query"; // import your query config

export default defineEventHandler((event) => {
	return query.handler(toWebRequest(event));
});
```
<Callout type="info">
 You can change the path on your better-query configuration but it's recommended to keep it as `/api/query/[...all]`
</Callout>

### Migrate the database

Run the following command to create the necessary tables in your database:

```bash
npx @better-query/cli migrate
```

## Create a client

Create a client instance. You can name the file anything you want. Here we are creating `client.ts` file inside the `lib/` directory.

```ts title="query-client.ts"
import { createAuthClient } from "better-query/vue" // make sure to import from better-query/vue

export const queryClient = createAuthClient({
    //you can pass client configuration here
})
```

Once you have created the client, you can use it to sign up, sign in, and perform other actions.
Some of the actions are reactive.

### Example usage

```vue title="index.vue"
<script setup lang="ts">
import { queryClient } from "~/lib/client"
const session = queryClient.useSession()
</script>

<template>
    <div>
        <button v-if="!session?.data" @click="() => queryClient.signIn.social({
            provider: 'github'
        })">
            Continue with GitHub
        </button>
        <div>
            <pre>{{ session.data }}</pre>
            <button v-if="session.data" @click="queryClient.signOut()">
                Sign out
            </button>
        </div>
    </div>
</template>
```

### Server Usage

The `api` object exported from the query instance contains all the actions that you can perform on the server. Every endpoint made inside Better Query is a invocable as a function. Including plugins endpoints.

**Example: Getting Session on a server API route**

```tsx title="server/api/example.ts"
import { query } from "~/lib/query";

export default defineEventHandler((event) => {
    const session = await query.api.getSession({
      headers: event.headers
    });

   if(session) {
     // access the session.session && session.user
   }
});
```


### SSR Usage

If you are using Nuxt with SSR, you can use the `useSession` function in the `setup` function of your page component and pass `useFetch` to make it work with SSR.

```vue title="index.vue"
<script setup lang="ts">
import { queryClient } from "~/lib/query-client";

const { data: session } = await queryClient.useSession(useFetch);
</script>

<template>
    <p>
        {{ session }}
    </p>
</template>
```


### Middleware

To add middleware to your Nuxt project, you can use the `useSession` method from the client.

```ts title="middleware/query.global.ts"
import { queryClient } from "~/lib/query-client";
export default defineNuxtRouteMiddleware(async (to, from) => {
	const { data: session } = await queryClient.useSession(useFetch); 
	if (!session.value) {
		if (to.path === "/dashboard") {
			return navigateTo("/");
		}
	}
});
```

### Resources & Examples

- [Nuxt and Nuxt Hub example](https://github.com/atinux/nuxthub-better-query) on GitHub.
- [NuxtZzle is Nuxt,Drizzle ORM example](https://github.com/leamsigc/nuxt-better-query-drizzle) on GitHub [preview](https://nuxt-better-query.giessen.dev/)
- [Nuxt example](https://stackblitz.com/github/better-query/better-query/tree/main/examples/nuxt-example) on StackBlitz.
- [NuxSaaS (Github)](https://github.com/NuxSaaS/NuxSaaS) is a full-stack SaaS Starter Kit that leverages Better Query for secure and efficient user CRUD API. [Demo](https://nuxsaas.com/)
- [NuxtOne (Github)](https://github.com/nuxtone/nuxt-one) is a Nuxt-based starter template for building AIaaS (AI-as-a-Service) applications [preview](https://www.one.devv.zone)
