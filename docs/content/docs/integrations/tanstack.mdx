---
title: TanStack Start Integration
description: Integrate Better Query with TanStack Start.
---

This integration guide is assuming you are using TanStack Start.

Before you start, make sure you have a Better Query instance configured. If you haven't done that yet, check out the [installation](/docs/installation).

### Mount the handler

We need to mount the handler to a TanStack API endpoint/Server Route.
Create a new file: `/src/routes/api/query/$.ts`

```ts title="src/routes/api/query/$.ts"
import { query } from '@/lib/query'
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/api/query/$')({
  server: {
    handlers: {
      GET: ({ request }) => {
        return query.handler(request)
      },
      POST: ({ request }) => {
        return query.handler(request)
      },
    },
  },
})
```

If you haven't created your server route handler yet, you can do so by creating a file: `/src/server.ts`

```ts title="src/server.ts"
import {
  createStartHandler,
  defaultStreamHandler,
} from '@tanstack/react-start/server'
import { createRouter } from './router'

export default createStartHandler({
  createRouter,
})(defaultStreamHandler)
```

### Usage tips

- We recommend using the client SDK or `queryClient` to handle CRUD API, rather than server actions with `query.api`.
- When you call functions that need to set cookies (like `signInEmail` or `signUpEmail`), you'll need to handle cookie setting for TanStack Start. Better Query provides a `reactStartCookies` plugin to automatically handle this for you.

```ts title="src/lib/query.ts"
import { betterAuth } from "better-query";
import { reactStartCookies } from "better-query/react-start";

export const query = betterAuth({
    //...your config
    plugins: [reactStartCookies()] // make sure this is the last plugin in the array
})
```

Now, when you call functions that set cookies, they will be automatically set using TanStack Start's cookie handling system.

```ts
import { query } from "@/lib/query"

const signIn = async () => {
    await query.api.signInEmail({
        body: {
            email: "user@email.com",
            password: "password",
        }
    })
}
```
